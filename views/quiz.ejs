<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="">
</head>
<style>
    body {
    font-family: 'Montserrat', serif;
    text-align: center;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

h1 {
    color: #333;
    font-size: 1.5rem;
}

#quiz {
    width: 40rem;
    margin: 20px auto;
    padding: 20px;
    border: 2px solid darkgray;
    background-color: lightgray;
    border-radius: 30px;
}

.question {
    margin-bottom: 20px;
    text-align: left;
}

img {
    max-width: 100%;
}

input[type="text"] {
    width: 100%;
    padding: 5px;
    margin-bottom: 10px;
    box-sizing: border-box;
}

#result {
    font-weight: bold;
    color: rgb(22, 22, 22);
}

/* Add any additional styles or modifications as needed */

</style>
<body onload="NextQuestion(0)"> <!-- Call the function to load the first question -->
    <h1>Color Vision Deficiency Quiz</h1>
    <p>What type of color vision deficiency do you have?</p>
    <div id="quiz">
        <!-- Questions will be dynamically generated by JavaScript -->
    </div>
    <button id="submit-button">Submit</button> <!-- Call the function to handle submitting answers -->
    <p id="result"></p>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
    const questions = [
        {
            questionText: "What number do you see in the image below?",
            imageUrl: "img1.png",
            correctAnswer: "3",
            deficiencyType: "protanopia"
        },
        {
            questionText: "What number do you see in the image below?",
            imageUrl: "deu.jpg",
            correctAnswer: "2",
            deficiencyType: "deuteranopia"
        },
        {
            questionText: "What number do you see in the image below?",
            imageUrl: "img2.png",
            correctAnswer: "21",
            deficiencyType: "deuteranopia"
        },
        {
            questionText: "What number do you see in the image below?",
            imageUrl: "img3.png",
            correctAnswer: "5",
            deficiencyType: "protanopia"
        },
        {
            questionText: "What number do you see in the image below?",
            imageUrl: "img5.png",
            correctAnswer: "5",
            deficiencyType: "tritanopia"
        },
        {
            questionText: "What number do you see in the image below?",
            imageUrl: "img6.png",
            correctAnswer: "3",
            deficiencyType: "deuteranopia"
        },
        {
            questionText: "What number do you see in the image below?",
            imageUrl: "img7.png",
            correctAnswer: "6",
            deficiencyType: "protanopia"
        },
        // Add more questions here
    ];

    // Shuffle the questions array
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    shuffleArray(questions);

    const submitButton = document.getElementById("submit-button");
    const result = document.getElementById("result");
    const quizContainer = document.getElementById("quiz");

    // Generate HTML elements for questions and answers
    questions.forEach((question, index) => {
        const questionDiv = document.createElement("div");
        questionDiv.className = "question";
        questionDiv.innerHTML = `
            <p>${index + 1}. ${question.questionText}</p>
            <img src="${question.imageUrl}" alt="Ishihara Plate ${index + 1}" id="q${index + 1}-image">
            <input type="text" id="q${index + 1}-answer">
        `;
        quizContainer.appendChild(questionDiv);
    });


    submitButton.addEventListener("click", function() {
        let deficiencyScores = {
            protanopia: 0,
            deuteranopia: 0,
            tritanopia: 0
        };

        questions.forEach((question, index) => {
            const answer = question.correctAnswer;
            const userAnswer = document.getElementById(`q${index + 1}-answer`).value;

            if (userAnswer === answer) {
                deficiencyScores[question.deficiencyType]++;
            }
        });

        const highestScore = Math.max(
            deficiencyScores.protanopia,
            deficiencyScores.deuteranopia,
            deficiencyScores.tritanopia
        );

        if (highestScore === 0) {
            result.textContent = "You have normal color vision.";
        } else if (highestScore === deficiencyScores.protanopia) {
            result.textContent = "You have protanopia (red-green color deficiency).";
        } else if (highestScore === deficiencyScores.deuteranopia) {
            result.textContent = "You have deuteranopia (red-green color deficiency).";
        } else {
            result.textContent = "You have tritanopia (blue-yellow color deficiency).";
        }
    });
});
    </script> <!-- Include your JavaScript file here -->
    <a href="http://localhost:3000/urls">
        <button id="button">NEXT</button>
    </a>
</body>
</html>

